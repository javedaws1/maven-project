pipeline {
    agent any
    def workspace = env.WORKSPACE
    echo "workspace directory is ${workspace}"
    stages {
      stage('checkout'){
	    steps {
		  git url: 'https://github.com/javedaws1/maven-project.git'
		  }
		}
	  stage('init') {
	    steps {
	          tool name: 'gradle-5.5", type: gradle
		  sh './gradlew compileJava'
		  }
        }
          stage('compile') {
	    steps {
		  sh './gradlew compileJava'
		  }
        }
	  stage('unit_test') {
        steps {
          sh './gradlew test'		
		  }
		}
	  stage('package') {
	    steps {
		  sh './gradlew build'
		  }
		}
      stage	('archive_artifact') {
	    steps {
		  archiveArtifacts artifacts: '**/target/*.war', fingerprint: true
          onlyIfSuccessful()
   		  }
		}
  }    	
}
