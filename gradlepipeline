pipeline {
    agent any
    environment {
      def workspace = "${env.WORKSPACE}"
      def curr_dir = "${PWD}"
      echo 'workspace directory is ${workspace} and directory is ${curr_dir}'
    }
    tools {
      jdk 'jdk8'
      gradle 'gradle-5.5'
    }
    stages {
      stage('checkout'){
	    steps {
		  git url: 'https://github.com/javedaws1/maven-project.git'
		  }
		}
	  stage('init') {
	    steps {
		  sh './gradlew compileJava'
		  }
        }
          stage('compile') {
	    steps {
		  sh './gradlew compileJava'
		  }
        }
	  stage('unit_test') {
        steps {
          sh './gradlew test'		
		  }
		}
	  stage('package') {
	    steps {
		  sh './gradlew build'
		  }
		}
      stage	('archive_artifact') {
	    steps {
		  archiveArtifacts artifacts: '**/target/*.war', fingerprint: true
          onlyIfSuccessful()
   		  }
		}
  }    	
}
